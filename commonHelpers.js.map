{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/js/index.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = 'live_WBAXg2spdkwyhrllREaQ2aUDs97gq6IhSDZKEvd663sDi13vUZD45ddW3MHz3u6C';\nconst BASE_URL = 'https://api.thecatapi.com/v1';\nconst BREEDS_END_POINT = 'breeds';\nconst SEARCH_END_POINT = 'images/search';\naxios.defaults.headers.common[\"x-api-key\"] = API_KEY;\n\nexport const fetchBreeds = async () => {\n  const responce = await axios.get(`${BASE_URL}/${BREEDS_END_POINT}`)\n  if (!responce || responce.status !== 200) {\n    throw new Error(responce.statusText)\n  }\n  return responce.data\n}\n\nexport const fetchCatByBreed = async (breedId) => {\n  const params = new URLSearchParams({\n    breed_ids: breedId\n  })\n  const responce = await axios.get(`${BASE_URL}/${SEARCH_END_POINT}?${params}`)\n\n  if (!responce || responce.status !== 200) {\n    throw new Error(responce.statusText)\n  }\n  return responce.data\n}","import iziToast from \"izitoast\";\nimport SlimSelect from 'slim-select'\nimport { fetchBreeds, fetchCatByBreed } from './cat-api'\nimport 'slim-select/styles';\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst selectReff = document.querySelector('.breed-select')\nconst loaderTextReff = document.querySelector('.loader-text')\nconst loaderReff = document.querySelector('.loader')\nconst errorReff = document.querySelector('.error')\nconst catInfoReff = document.querySelector('.cat-info')\n\nfetchBreeds()\n  .then((res) => {\n    selectReff.classList.remove('visually-hidden')\n    loaderReff.classList.add('visually-hidden')\n    markupOptions(res)\n  })\n  .catch(() => {\n    loaderReff.classList.add('visually-hidden')\n    iziToast.show({\n      title: 'date',\n      color: 'red',\n      position: 'topCenter',\n      message: 'Oops! Something went wrong! Try reloading the page!'\n    });\n\n  })\n\nfunction markupOptions(data) {\n  // const options = data.map((item) => {\n  //   const option = document.createElement('option')\n  //   option.value = item.id\n  //   option.textContent = item.name\n  //   selectReff.appendChild(option)\n  //   return option\n  // })\n  // selectReff.appendChild(...options)\n\n  new SlimSelect({\n    select: '#selectElement',\n    data: [...data.map((item) => ({ 'text': item.name, 'value': item.id }))],\n    option: {\n    },\n    settings: {\n      searchPlaceholder: 'Search',\n      hideSelected: true,\n      display: false,\n      hideSelected: true,\n      placeholderText: 'Select Value',\n    },\n    events: {\n      afterChange: handleSelect,\n    }\n  })\n}\n\n// selectReff.addEventListener('change', (evt) => {\n// evt.preventDefault()\n// const { value } = evt.target\n// fetchCatByBreed(value)\n//   .then((res) => createMarkup(res))\n//   .catch(() => {\n//     iziToast.show({\n//       title: 'date',\n//       color: 'red',\n//       position: 'topCenter',\n//       message: 'Oops! Something went wrong! Try reloading the page!'\n//     });\n//   })\n// })\n\nconst handleSelect = (evt) => {\n  loaderReff.classList.remove('visually-hidden')\n  const value = evt.map((item) => item.value).toString()\n  fetchCatByBreed(value)\n    .then((res) => {\n      loaderReff.classList.add('visually-hidden')\n      createMarkup(res)\n    })\n    .catch(() => {\n      catInfoReff.innerHTML = ''\n      loaderReff.classList.add('visually-hidden')\n      iziToast.show({\n        title: 'date',\n        color: 'red',\n        position: 'topCenter',\n        message: 'Oops! Something went wrong! Try reloading the page!'\n      });\n    })\n}\n\nconst createMarkup = (data) => {\n  const { url, breeds } = data[0]\n  const { name, alt_names, description, temperament } = breeds[0]\n  const markup = `\n  <div class='imgWripper'>\n    <img src=${url} width=100% height=500 alt=${alt_names}/>  \n  </div>\n  <div class='descriptionWripper'>\n    <h2 class='title'>${name}</h2>\n    <p class='description'>${description}</p>\n    <h3 class='subtitle'>${temperament}</h3>\n  </div>\n  `\n  catInfoReff.innerHTML = markup\n}\n\n\n"],"names":["API_KEY","BASE_URL","BREEDS_END_POINT","SEARCH_END_POINT","axios","fetchBreeds","responce","fetchCatByBreed","breedId","params","selectReff","loaderReff","catInfoReff","res","markupOptions","iziToast","data","SlimSelect","item","handleSelect","evt","value","createMarkup","url","breeds","name","alt_names","description","temperament","markup"],"mappings":"owBAEA,MAAMA,EAAU,wEACVC,EAAW,+BACXC,EAAmB,SACnBC,EAAmB,gBACzBC,EAAM,SAAS,QAAQ,OAAO,aAAeJ,EAEtC,MAAMK,EAAc,SAAY,CACrC,MAAMC,EAAW,MAAMF,EAAM,IAAI,GAAGH,KAAYC,GAAkB,EAClE,GAAI,CAACI,GAAYA,EAAS,SAAW,IACnC,MAAM,IAAI,MAAMA,EAAS,UAAU,EAErC,OAAOA,EAAS,IAClB,EAEaC,EAAkB,MAAOC,GAAY,CAChD,MAAMC,EAAS,IAAI,gBAAgB,CACjC,UAAWD,CACf,CAAG,EACKF,EAAW,MAAMF,EAAM,IAAI,GAAGH,KAAYE,KAAoBM,GAAQ,EAE5E,GAAI,CAACH,GAAYA,EAAS,SAAW,IACnC,MAAM,IAAI,MAAMA,EAAS,UAAU,EAErC,OAAOA,EAAS,IAClB,ECpBMI,EAAa,SAAS,cAAc,eAAe,EAClC,SAAS,cAAc,cAAc,EAC5D,MAAMC,EAAa,SAAS,cAAc,SAAS,EACjC,SAAS,cAAc,QAAQ,EACjD,MAAMC,EAAc,SAAS,cAAc,WAAW,EAEtDP,EAAa,EACV,KAAMQ,GAAQ,CACbH,EAAW,UAAU,OAAO,iBAAiB,EAC7CC,EAAW,UAAU,IAAI,iBAAiB,EAC1CG,EAAcD,CAAG,CACrB,CAAG,EACA,MAAM,IAAM,CACXF,EAAW,UAAU,IAAI,iBAAiB,EAC1CI,EAAS,KAAK,CACZ,MAAO,OACP,MAAO,MACP,SAAU,YACV,QAAS,qDACf,CAAK,CAEL,CAAG,EAEH,SAASD,EAAcE,EAAM,CAU3B,IAAIC,EAAW,CACb,OAAQ,iBACR,KAAM,CAAC,GAAGD,EAAK,IAAKE,IAAU,CAAE,KAAQA,EAAK,KAAM,MAASA,EAAK,EAAE,EAAG,CAAC,EACvE,OAAQ,CACP,EACD,SAAU,CACR,kBAAmB,SACnB,aAAc,GACd,QAAS,GACT,aAAc,GACd,gBAAiB,cAClB,EACD,OAAQ,CACN,YAAaC,CACd,CACL,CAAG,CACH,CAiBA,MAAMA,EAAgBC,GAAQ,CAC5BT,EAAW,UAAU,OAAO,iBAAiB,EAC7C,MAAMU,EAAQD,EAAI,IAAKF,GAASA,EAAK,KAAK,EAAE,SAAU,EACtDX,EAAgBc,CAAK,EAClB,KAAMR,GAAQ,CACbF,EAAW,UAAU,IAAI,iBAAiB,EAC1CW,EAAaT,CAAG,CACtB,CAAK,EACA,MAAM,IAAM,CACXD,EAAY,UAAY,GACxBD,EAAW,UAAU,IAAI,iBAAiB,EAC1CI,EAAS,KAAK,CACZ,MAAO,OACP,MAAO,MACP,SAAU,YACV,QAAS,qDACjB,CAAO,CACP,CAAK,CACL,EAEMO,EAAgBN,GAAS,CAC7B,KAAM,CAAE,IAAAO,EAAK,OAAAC,GAAWR,EAAK,GACvB,CAAE,KAAAS,EAAM,UAAAC,EAAW,YAAAC,EAAa,YAAAC,CAAa,EAAGJ,EAAO,GACvDK,EAAS;AAAA;AAAA,eAEFN,+BAAiCG;AAAA;AAAA;AAAA,wBAGxBD;AAAA,6BACKE;AAAA,2BACFC;AAAA;AAAA,IAGzBhB,EAAY,UAAYiB,CAC1B"}